#!/usr/bin/env bash

echo "Building Lipstick on a Pigâ€¦"

# Lipstick build script.
scripts=()
scriptNames=("configure" "disable" "enable" "monitor" "uninstall" "update" "apps")

# Prepare distribution folder.
rm -rf ./dist
mkdir -p ./dist

# Create install script.
cat ./template/head.bash > dist/install

# Bundle the scripts into install script.
for scriptName in "${scriptNames[@]}"
do
  tempVar="_${scriptName}"
  echo "\nread -rd '' ${tempVar} <<-EOF" >> dist/install
  cat "./scripts/lipstick-${scriptName}" >> dist/install
  echo "EOF" >> dist/install
  echo "files[${scriptName}]=${tempVar}"
done

# Complete install script.
cat ./template/main.bash >> dist/install

echo 'Done.'
